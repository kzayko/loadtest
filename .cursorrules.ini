# Общие принципы
- Стек: Python 3.x.
- Использовать типы (type hints) и mypy/pyright при необходимости.
- Код форматировать black + isort, стиль PEP8.
- Не использовать устаревшие или неподдерживаемые библиотеки без явного обоснования.
- Писать код простой, без использования сложных конструкций если у них нет существенных преимуществ

# Секреты и конфигурация
- Никогда не коммитить секреты, доступы, ключи API, пароли, токены.
- Все конфиденциальные данные должны приходить из переменных окружения или файлов .env, которые добавлены в .gitignore.
- При написании кода всегда использовать os.getenv / pydantic Settings / dotenv‑подход и не захардкоживать секреты.
- Не читать и не изменять реальные .env с секретами; при необходимости использовать примеры типа .env.example с фейковыми значениями паролей.
- Если в задаче просят показать пример .env — писать отдельный скрипт и запускать его для генерации значений. Никогда не загружать ключи в конекст.

# Работа с ветками и задачами
- Для каждой новой задачи (фича, багфикс, рефакторинг) всегда создавать новую git‑ветку от main/master.
- Название ветки должно отражать задачу: feature/<краткое‑имя>, bugfix/<краткое‑имя> или chore/<краткое‑имя>.
- Все изменения по задаче (код, тесты, правки) вносятся только в соответствующей ветке.
- Не вносить несвязанные изменения в одной ветке; если обнаружена новая задача — создать отдельную ветку.
- После завершения работы — подготовить изменения к PR/MR с понятным описанием.

# Тесты и структура проекта
- Для любого нового функционала или бага писать тесты одновременно с кодом (TDD приветствуется, но не обязательно).
- Все тесты хранить в отдельной директории `tests/` (или `test/`, по договорённости проекта) в корне или рядом с модулем, но не смешивать с продакшен‑кодом.
- Имена файлов тестов: test_*.py.
- Покрывать тестами основные ветки исполнения, ошибки и граничные случаи.
- Не изменять существующие тесты без необходимости; при рефакторинге сначала обновить или добавить тесты.
- Если агенту поручают новую фичу — сначала предложить/добавить тесты, далее — реализацию, потом прогон тестов.

# Импорт и структура кода
- Структурировать код на модули и пакеты, избегать God‑файлов.
- Держать бизнес‑логику отдельно от I/O (CLI, HTTP, БД).
- Не использовать глобальное состояние, по возможности передавать зависимости явно.
- Логирование делать через стандартный logging, без принтов в продакшен‑коде (кроме CLI‑утилит).

# Взаимодействие с агентом
- При запросах к агенту: всегда уточнять, что надо создать/обновить тесты в соответствии с изменениями.
- При запросе на новый функционал: описывать задачу, ожидаемое поведение и где должны лежать тесты.
- При исправлении бага: добавить или поправить тест, воспроизводящий баг, затем править код так, чтобы тест проходил.
# Взаимодействие с внешними компонентами
- При упоминании в постановке задачи внешнего компонента установи докер-образ с dockerhub.
- Создай отдельный скрипт на начальную конфигурацию такого компонента (создание пользователей, баз данных, индексов и прочих сущностей)
- при первом запуске кода на исполнение запусти все такие скрипты конфигурации.
- пароли для использования в скриптах конфигурации должны быть созданы рандомно скриптом в момент написания кода. Этот же скрипт должен записать их в .env файл таким образом, чтобы клиенты и серверы использовали правильные пароли для взаимодействия.
# Репозитории
- при первом создании проекта инициализируй структуру git.
- создавай краткую историю изменений, начиная с последнего коммита. Описывай кратко 1 фразой их суть. При коммите - указывай ее в commit message.
 
 